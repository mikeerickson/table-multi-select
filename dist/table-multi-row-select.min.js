"use strict";!function(e){function t(t){var s={id:"table-multi-row-select",className:"table-multi-row-select",selected:[1],rowOffset:0};s=$.extend(s,t),this.init=function(e){var t=this;this.options=$.extend(s,e);var i=$("#"+this.options.id);0===i.length&&(i=$("."+this.options.className));var o=$("tbody tr",i);o?(this.tableRows=o,$(o).bind("mousedown",function(){return t.isGroupHeader(this)?!1:void t.handleRowClick(this)}),t.setSelectedRows(this.options.selected)):console.error("Unable to find table reference. Make sure you have a table with id or class `%s`.",this.options.className)},this.reload=function(e){this.init(e)},this.clearAll=function(){for(var e=0;e<this.tableRows.length;e++)this.tableRows[e].className=""},this.isGroupHeader=function(e){var t=$("td",$(e));return 100==$(t[0]).attr("colspan")?!0:!1},this.setSelectedRows=function(e){this.clearAll();for(var t=0;t<e.length;t++){var s=this.tableRows[e[t]];this.isGroupHeader(s)||(s.className="selected")}},this.getSelectedRows=function(){for(var e=[],t=0;t<this.tableRows.length;t++)"selected"===this.tableRows[t].className&&e.push(t);return e},this.handleRowClick=function(t){e.event.ctrlKey&&this.toggleRow(t),0===e.event.button&&(e.event.ctrlKey||e.event.shiftKey||(this.clearAll(),this.toggleRow(t)),e.event.shiftKey&&this.selectRowsBetweenIndexes([this.lastSelectedRow.rowIndex,t.rowIndex])),this.selectedRows=this.getSelectedRows()},this.toggleRow=function(e){this.isGroupHeader(e)||(e.className="selected"==e.className?"":"selected",this.lastSelectedRow=e)},this.selectRowsBetweenIndexes=function(e){e.sort(function(e,t){return e-t});for(var t=e[0];t<=e[1];t++){var s=this.tableRows[t-1-this.options.rowOffset];this.isGroupHeader(s)||(s.className="selected")}},this.selectAll=function(){for(var e=[],t=0;t<this.tableRows.length;t++)this.isGroupHeader(this.tableRows[t])||(e.push(t),this.tableRows[t].className="selected");this.selectedRows=e}}e.TableMultiRowSelect=t}(window);